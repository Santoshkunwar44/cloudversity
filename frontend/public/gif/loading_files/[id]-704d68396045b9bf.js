(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142,718,9008,9709],{77179:function(e,t,n){var r=n(18361);e.exports=function(e){return r(e,5)}},90718:function(e,t,n){"use strict";n.r(t),n.d(t,{UploadStarterAnimation:function(){return k},default:function(){return C}});var r,o=n(55312),i=n(89303),a=n(24642),s=n.n(a),c=n(26766),l=n(46717),u=n(29901),d=n(24161),p=n(389),f=n(80972),v=n(74536),x=n(26729);!function(e){e.ANIKIHAMSTER="aniki-hamster",e.LOTTIELEGO="lottie-lego",e.POLITECHICKY="polite-chicky"}(r||(r={}));var m=n(91705),h=n(51638),y=n(30945),b=n(92971),j=n(61250),w=(0,l.zo)("div",{background:"#00C1A2",display:"flex",width:"162px",height:"162px",justifyContent:"center",alignItems:"center",marginBottom:"8px",cursor:"pointer","&:hover":{background:"#019D91"}}),g=(0,l.zo)("div",{background:"#ffffff",display:"flex",width:"162px",height:"162px",justifyContent:"center",alignItems:"center",marginBottom:"8px",cursor:"pointer",boxShadow:"0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 2px 6px 0px rgba(61, 72, 83, 0.06), 0px 0px 1px 0px rgba(61, 72, 83, 0.36);","&:hover":{boxShadow:"0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 4px 12px 0px rgba(61, 72, 83, 0.12), 0px 0px 1px 0px rgba(61, 72, 83, 0.36);"}}),k=function(e){var t=e.projectId,n=(0,m.X)(),a=(0,d.useSetRecoilState)(b._b),l=(0,p.Db)(y.H4),k=(0,i.Z)(l,2)[1],C=(0,u.useState)(!1),O=C[0],S=C[1],E=(0,h.cF)(),I=E.activeWorkspace,N=E.activeWorkspaceId,P=function(e){(0,c.Z9)(new c.Rd("button",e))},L=(0,u.useCallback)(function(){var e=(0,o.Z)(s().mark((function e(n){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=15;break}return S(!0),e.prev=2,r={workspaceId:N,file:n,projectId:t},e.next=6,k({input:r});case 6:if(!(o=e.sent).error){e.next=9;break}throw new Error(o.error.message);case 9:o.data&&(window.location.href="/animation/".concat(o.data.initialAnimationUpload)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),S(!1);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[N,O,t,k]),A=(0,u.useCallback)((function(){P("create an animation"),window.open("".concat("https://creator.lottiefiles.com","/new?workspace=").concat(null==I?void 0:I.id),"_blank")}),[I]);return(0,j.jsx)("div",{className:"w-full px-6 py-8 rounded-lg",style:{background:"#EAEFF2"},children:(0,j.jsxs)("div",{className:"flex flex-col w-full overflow-x-auto",children:[(0,j.jsxs)("h1",{className:"mb-8 text-lg text-center text-gray-900 font-lf-bold",children:[!n&&"Get started by uploading or opening an animation",n&&"Get started by creating, uploading or opening an animation"]}),(0,j.jsxs)("div",{className:"relative flex mx-auto space-x-3 text-center",children:[O&&(0,j.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-lg opacity-50 bg-gray-50",children:(0,j.jsx)(x.a,{type:"spinner"})}),n&&(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(w,{className:"rounded-lg",onClick:A,children:(0,j.jsx)(v.J,{name:"plus",color:"text-white",large:!0})}),(0,j.jsx)("div",{className:"text-sm text-gray-900 font-lf-bold",children:"Create an animation"}),(0,j.jsx)("div",{className:"text-xs text-gray-400",children:"with Lottie Creator"})]}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(w,{className:"rounded-lg",onClick:function(){a(!0),P("open upload modal")},children:(0,j.jsx)(v.J,{name:"upload",color:"text-white",large:!0})}),(0,j.jsx)("div",{className:"text-sm text-gray-900 font-lf-bold",children:"Upload an animation"}),(0,j.jsx)("div",{className:"text-xs text-gray-400",children:"Lottie JSON / dotLottie"})]}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(g,{className:"rounded-lg ",onClick:function(){L(r.LOTTIELEGO),P("upload lottie lego")},children:(0,j.jsx)(f.J5,{src:"/lotties/sample-animations/lottie-lego.json",hover:!0})}),(0,j.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Lottie lego"})]}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(g,{className:"rounded-lg",onClick:function(){L(r.POLITECHICKY),P("upload polite chicky")},children:(0,j.jsx)(f.J5,{src:"/lotties/sample-animations/polite-chicky.json",hover:!0})}),(0,j.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Polite chicky"})]}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(g,{className:"rounded-lg",onClick:function(){L(r.ANIKIHAMSTER),P("upload aniki hamster")},children:(0,j.jsx)(f.J5,{src:"/lotties/sample-animations/aniki-hamster.json",hover:!0})}),(0,j.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Aniki hamster"})]})]})]})})},C=k},97452:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});n(29901);var r=n(24161),o=n(95610),i=n(26729),a=n(61250),s=function(e){var t=e.children,n=e.contentWrapperCssClasses,s=void 0===n?"flex-grow overflow-hidden":n,c=e.headerControl,l=e.headerWrapperCssClasses,u=void 0===l?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":l,d=(0,r.useRecoilValue)(o.qx);return(0,a.jsxs)("div",{"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[c&&(0,a.jsx)("div",{className:u,children:c}),d?(0,a.jsx)(i.a,{size:"lg"}):(0,a.jsx)("div",{className:s,children:t})]})}},80972:function(e,t,n){"use strict";n.d(t,{J5:function(){return m}});var r=n(77916),o=n(55312),i=n(51848),a=n(24642),s=n.n(a),c=n(46450),l=n(32147),u=n(29901),d=n(26729),p=n(61250),f=["isDotLottie","maxHeight","playerRef","src"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.isDotLottie,n=e.maxHeight,r=void 0===n||n,a=e.playerRef,v=e.src,m=(0,i.Z)(e,f),h=(0,u.useState)(),y=h[0],b=h[1],j=(0,u.useMemo)((function(){if(t)return!0;if("string"==typeof v){var e,n,r=null!==(e=v.split("/").pop())&&void 0!==e?e:v;return"lottie"===(null!==(n=r.split("?")[0])&&void 0!==n?n:r).split(".").pop()}return!1}),[v,t]);return(0,u.useEffect)((function(){if(j)return function(){};if("string"==typeof v){var e=!0,t=function(){var t=(0,o.Z)(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(v);case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e&&b(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}return b(v),function(){}}),[v,j]),j?"string"==typeof v&&v?(0,p.jsx)(c.y1,x(x({src:v,ref:a},m),{},{style:x({height:"100%"},(null==m?void 0:m.style)&&m.style)})):(0,p.jsx)(d.a,{type:"spinner",size:"lg"}):y?(0,p.jsx)(l.J5,x(x({src:y||"",ref:a},m),{},{style:x({height:r?"100%":""},(null==m?void 0:m.style)&&m.style)})):(0,p.jsx)(d.a,{type:"spinner",size:"lg"})}},56408:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var r=n(83849),o=n.n(r),i=(n(29901),n(24161)),a=n(95610),s=n(92971),c=n(13645),l=n(74536),u=n(61250),d="https://creator.lottiefiles.com",p=function(e){var t=e.canCreateAnimations,n=void 0!==t&&t,r=e.canCreateFolder,p=void 0!==r&&r,f=e.canUpload,v=void 0!==f&&f,x=e.description,m=e.layout,h=void 0===m?"vertical":m,y=e.title,b=e.view,j=void 0===b?"dashboard":b,w=(0,i.useSetRecoilState)(s._b),g=(0,i.useSetRecoilState)(a.rU),k=300;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:o()({"flex items-center justify-center":!0,"flex-col":"vertical"===h,"flex-row":"horizontal"===h}),children:["dashboard"===j&&(0,u.jsx)(c.V,{autoplay:!0,loop:!0,src:"/lotties/empty-dashboard.json",style:{width:"".concat(k,"px")}}),"empty-project"===j&&(0,u.jsx)(c.V,{autoplay:!0,loop:!0,src:"/lotties/empty-project.json",style:{width:"".concat(k,"px")}}),"empty-shared-with-me"===j&&(0,u.jsx)(c.V,{autoplay:!0,loop:!0,src:"/lotties/empty-pour-bottle.json",style:{width:"".concat(k,"px")}}),"empty-project-folders"===j&&(0,u.jsx)(c.V,{autoplay:!0,loop:!0,src:"/lotties/empty-3-mugs.json",style:{width:"".concat(k,"px")}}),"no-results"===j&&(0,u.jsx)(c.V,{autoplay:!0,loop:!0,src:"/lotties/search.json",style:{width:"".concat(k,"px")}}),"empty-collection"===j&&(0,u.jsx)(c.V,{autoplay:!0,loop:!0,src:"/lotties/empty-collection.json",style:{width:"".concat(k,"px")}}),(0,u.jsxs)("div",{className:o()({"flex flex-col text-gray-900":!0,"mt-6 items-center space-y-2":"vertical"===h,"ml-8":"horizontal"===h}),children:[(0,u.jsx)("div",{className:"text-2xl font-lf-bold",children:y}),(0,u.jsx)("div",{className:"max-w-sm text-sm md:text-center",children:x}),v&&(0,u.jsx)("div",{children:(0,u.jsxs)("button",{type:"button",onClick:function(){return w(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:[(0,u.jsx)(l.J,{name:"plus"}),(0,u.jsx)("span",{children:"Upload animations"})]})}),p&&(0,u.jsx)("div",{children:(0,u.jsx)("button",{type:"button",onClick:function(){return g(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:(0,u.jsx)("span",{children:"Create Folder"})})}),n&&(0,u.jsx)("div",{children:(0,u.jsx)("a",{className:"inline-flex items-center h-10 px-4 py-0 mt-4 space-x-1 text-base leading-5 align-middle lf-btn primary",href:d,target:"_blank",rel:"noreferrer",children:"Create animation"})})]})]})})}},75443:function(e,t,n){"use strict";var r=n(29901),o=n(96312);t.Z=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1],i=function(e){(e.metaKey&&o.Mq||e.ctrlKey&&!o.Mq)&&n(!0)},a=function(e){(!e.metaKey&&o.Mq||!e.ctrlKey&&!o.Mq)&&n(!1)};return(0,r.useEffect)((function(){return document.addEventListener("keydown",i),document.addEventListener("keyup",a),function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",a)}}),[]),t}},3284:function(e,t,n){"use strict";var r=n(29901);t.Z=function(e){var t=e.onPress,n=e.onRelease,o=e.dependencies,i=void 0===o?[]:o,a=e.takesPrecedence;(0,r.useEffect)((function(){var e=function(e){var n=document.activeElement;n&&n.isContentEditable||n&&"button"===n.tagName.toLowerCase()&&!a||"Shift"===e.key&&(e.preventDefault(),t())},r=function(e){var t=document.activeElement;t&&t.isContentEditable||t&&"button"===t.tagName.toLowerCase()&&!a||"Shift"===e.key&&(e.preventDefault(),n())};return window.addEventListener("keydown",e),window.addEventListener("keyup",r),function(){window.removeEventListener("keydown",e),window.removeEventListener("keydown",r)}}),i)}},89654:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(69452),o=n(89303),i=n(55312),a=n(24642),s=n.n(a),c=n(59715),l=n(26766),u=n(62295),d=n(4611),p=n(73378),f=n(17172),v=n(29901),x=n(24161),m=n(389),h=n(90718),y=n(92814),b=n(97452),j=n(56408),w=n(25067),g=n(65815),k=n(48321),C=n(75443),O=n(40355),S=n(11706),E=n(87923),I=n(3284),N=n(40729),P=n(51638),L=n(71461),A=n(30525),R=n(81662),_=n(95610),F=n(92971),D=n(41103),T=n(36142),M=n(79321),Z=n(96312),V=n(36199),W=n(61250),G=(0,p.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(5471),n.e(9837),n.e(9822)]).then(n.bind(n,59822)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[59822]},modules:["project/[id].tsx -> @/components/features/download/select-zip-variation-modal-with-feature-service"]}}),U=(0,p.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(5471),n.e(9837),n.e(5290),n.e(9434),n.e(2113),n.e(7653),n.e(7361)]).then(n.bind(n,96914)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[96914]},modules:["project/[id].tsx -> @/components/ui/headers/project-header"]}}),H=(0,p.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(5471),n.e(9837),n.e(6220),n.e(6660),n.e(9465),n.e(6877)]).then(n.bind(n,96961)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[96961]},modules:["project/[id].tsx -> @/components/ui/selection-bar"]}}),q=(0,p.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(467),n.e(133),n.e(837),n.e(4572),n.e(4701)]).then(n.bind(n,51855)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[51855]},modules:["project/[id].tsx -> @/components/ui/views/grid-view"]}}),J=(0,p.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(4845),n.e(5471),n.e(9837),n.e(467),n.e(4868),n.e(1438),n.e(5290),n.e(6220),n.e(6660),n.e(4431),n.e(2113),n.e(7971),n.e(4430),n.e(9465),n.e(6101),n.e(5632),n.e(1530),n.e(133),n.e(9226),n.e(7837)]).then(n.bind(n,9226)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[9226]},modules:["project/[id].tsx -> @/components/ui/views/list-view"]}});function B(){var e,t,n,a,p,B,Y,K,z,Q,X,$=(0,d.useRouter)(),ee=(0,k.a)().user,te=$.query,ne=te.id,re=te.sort,oe=te.status,ie=te.type,ae=(0,w.p)(),se=(0,x.useSetRecoilState)(_.qx),ce=(0,v.useState)(!1),le=ce[0],ue=ce[1],de=(0,x.useSetRecoilState)(F.QJ),pe=(0,v.useState)([]),fe=pe[0],ve=pe[1],xe=(0,x.useSetRecoilState)(A.Y),me=fe.length>0,he=$.query.from,ye=(0,v.useState)(!1),be=ye[0],je=ye[1],we=(0,v.useState)(null),ge=we[0],ke=we[1],Ce=(0,v.useState)(!1),Oe=Ce[0],Se=Ce[1],Ee=(0,x.useRecoilValue)(D.Ol),Ie=(0,c.SS)(u.AD.FILE_UPLOAD_LIMIT),Ne=(0,v.useState)(null),Pe=Ne[0],Le=Ne[1],Ae=(0,v.useState)(!1),Re=Ae[0],_e=Ae[1],Fe=(0,v.useState)(null),De=Fe[0],Te=Fe[1],Me=(0,v.useState)(null),Ze=Me[0],Ve=Me[1],We=(0,v.useState)(!1),Ge=We[0],Ue=We[1];(0,I.Z)({onPress:function(){_e(!0)},onRelease:function(){_e(!1)}});var He=(0,m.m8)(),qe=(0,m.aM)({query:L.ig,variables:{id:ne,orderBy:re||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),status:oe,type:ie,first:24},pause:!ne}),Je=(0,o.Z)(qe,1)[0],Be=(0,P.hp)(null===(e=Je.data)||void 0===e||null===(t=e.project)||void 0===t?void 0:t.workspaceId),Ye=(0,v.useMemo)((function(){return(0,Z.fK)(Be)}),[Be]),Ke=(0,v.useState)(null),ze=Ke[0],Qe=Ke[1],Xe=(0,v.useState)(!1),$e=Xe[0],et=Xe[1],tt=Ie.on&&Ye===T.Q.FREE,nt=null===(n=Je.data)||void 0===n||null===(a=n.projectFiles)||void 0===a?void 0:a.edges.map((function(e){return e.node}));(0,v.useEffect)((function(){Je.fetching?se(!0):(se(!1),Je.error?$.push("/"):Je.data&&Je.data.projectFiles&&Je.data.project&&(Je.data.project.isSystem||de({name:Je.data.project.title,isPrivate:Boolean(Je.data.project.isPrivate),projectTitle:Je.data.project.title,type:"project",workspaceId:Je.data.project.workspaceId,projectId:Je.data.project.id}),(0,l.Z9)(new l.RG({projectId:Je.data.project.id,projectName:Je.data.project.title,workspaceId:Je.data.project.workspaceId})),se(!1),je(Je.data.projectFiles.pageInfo.hasNextPage),ke(Je.data.projectFiles.pageInfo.endCursor)))}),[Je,$,se,de]);var rt=(0,v.useCallback)((function(e){Te(V.RT.LOADED);var t=fe,n=t.map((function(e){return e.id})).indexOf(e);if(nt){var o=nt.find((function(t){return t.id===e}));if(!o)return;var i=nt.indexOf(o);if(Re)if(null===Pe)t.push(o);else{var a=(0,V.Jm)(Pe,i,nt);n>-1?(0,V.wh)(t,a):(0,V.AW)(t,a)}else n>-1?t.splice(n,1):t.push(o);Le(i)}0===t.length&&Te(null),ve((0,r.Z)(t)),xe(t.length)}),[fe,nt,xe,Pe,Re]),ot=(0,v.useCallback)((function(){Te(null),xe(0),ve([]),Le(null),Ue(!1)}),[xe]),it=(0,v.useCallback)((function(){Ee?null==ae||ae.pushError(y.Vv):(Qe(null),Se(!0))}),[Ee,ae]),at=(0,v.useCallback)((function(){Ee?null==ae||ae.pushError(y.Vv):(et(!0),Se(!0))}),[Ee,ae]),st=(0,v.useCallback)((function(){Se(!1),Qe(null),et(!1)}),[]),ct=(0,v.useCallback)((function(e,t){Ee?null==ae||ae.pushError(y.Vv):(et(!1),Qe({id:e,name:t}),Se(!0))}),[Ee,ae]),lt=(0,v.useMemo)((function(){return ze?1:$e||De===V.RT.EVERYTHING?(null===(e=Je.data)||void 0===e?void 0:e.projectFiles.totalCount)||0:fe.length;var e}),[ze,De,fe,$e,Je]),ut=(0,E.t)(),dt=(0,v.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=ze?[{id:ze.id,type:"FOLDER"}]:$e||De===V.RT.EVERYTHING?[{id:ne,type:"PROJECT"}]:fe.map((function(e){return{id:e.id,type:(0,M.qR)(e)?"FOLDER":"FILE"}})),et(!1),Qe(null),Se(!1),ot(),e.next=7,ut({entries:o,numberOfEntries:lt,projectId:ne,projectName:null===(n=Je.data)||void 0===n||null===(r=n.project)||void 0===r?void 0:r.title,folderId:null==ze?void 0:ze.id,folderName:null==ze?void 0:ze.name,variant:t});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ze,null===(p=Je.data)||void 0===p||null===(B=p.project)||void 0===B?void 0:B.title,ne,fe,De,ot,ut,lt,$e]),pt=(0,O._)("project-view","grid"),ft=(0,o.Z)(pt,2),vt=ft[0],xt=ft[1],mt=(0,v.useCallback)((function(){xt("grid"===vt?"list":"grid"),(0,l.Z9)(new l.rR({projectId:ne,userId:null==ee?void 0:ee.id,view:"grid"===vt?"list":"grid"}))}),[vt,xt,ne,ee]),ht=(0,x.useRecoilValue)(R.h),yt=(0,v.useCallback)((function(){ot(),null==ae||ae.pushSuccess("".concat(fe.length>1?"Assets were":"Asset was"," successfully transferred to ").concat(null==ht?void 0:ht.name,"."))}),[ot,fe.length,null==ht?void 0:ht.name,ae]),bt=(0,v.useCallback)((function(e){var t,n,o=fe,i=null===(t=Je.data)||void 0===t||null===(n=t.projectFiles)||void 0===n?void 0:n.edges.map((function(e){return e.node}));e?((0,V.AW)(o,i||[]),Te(V.RT.LOADED),Ue(!0)):((0,V.wh)(o,i||[]),Te(null),Ue(!1)),ve((0,r.Z)(o))}),[Je,fe]),jt=(0,v.useCallback)((0,i.Z)(s().mark((function e(){var t,n,r,o,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]&&i[0],nt&&0!==(null==nt?void 0:nt.length)){e.next=3;break}return e.abrupt("return");case 3:return r=n&&Je.data?(null===(t=Je.data)||void 0===t?void 0:t.projectFiles.totalCount)-(null==nt?void 0:nt.length):24,o=tt?Math.min(12,Math.abs(Ie.value-(null==nt?void 0:nt.length))):r,e.prev=5,ue(!0),e.next=9,He.query(L.f3,{id:ne,status:oe,type:ie,orderBy:re||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),after:ge,first:o}).toPromise();case 9:return e.prev=9,ue(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[5,,9,12]])}))),[nt,Je.data,tt,Ie.value,He,ne,oe,ie,re,ge]),wt=(0,v.useCallback)((function(){Je.data&&!Je.fetching&&!le&&be&&ge&&jt()}),[ge,jt,Je.data,Je.fetching,be,le]);(0,v.useEffect)((function(){ot()}),[$.asPath,ot]);var gt="https://creator.lottiefiles.com",kt=(0,C.Z)(),Ct=(0,v.useCallback)((function(e){var t,n,r="shared-with-me"===he;(((0,M.QR)(e)||(0,M.xK)(e))&&(t=e.fileObject.filename.split(".").pop()),"creator"===t)?window.open("".concat(gt,"?fileId=").concat(e.id),"_blank"):(n=(0,M.qR)(e)?"/folder/".concat(e.id):"/animation/".concat(e.id),re&&(n+="?sort=".concat(encodeURIComponent(re.toString()))),r&&(n+="".concat(re?"&":"?","from=shared-with-me")),kt?window.open(n,"_blank"):$.push(n))}),[he,gt,re,kt,$]),Ot=(null===(Y=Je.data)||void 0===Y?void 0:Y.project)||null,St=(0,v.useCallback)((0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nt){e.next=6;break}return e.next=3,He.query(L.A0,{id:ne}).toPromise();case 3:(t=e.sent).data&&Ve(t.data.project.stats),ve((0,r.Z)(nt));case 6:Te(V.RT.EVERYTHING);case 7:case"end":return e.stop()}}),e)}))),[He,ne,nt]),Et=fe.length&&(null==nt?void 0:nt.some((function(e){return-1===fe.findIndex((function(t){return t.id===e.id}))})))||!1,It=(0,S.k)(),Nt=It.start,Pt=It.stop;return(0,v.useEffect)((function(){return Nt([g.aF]),function(){Pt(g.aF.id)}}),[Ot]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(f.default,{children:(0,W.jsx)("title",{children:"LottieFiles Platform"})}),(0,W.jsxs)(N.s,{features:null==Ot?void 0:Ot.features,children:[(0,W.jsx)(b.o,{headerWrapperCssClasses:"flex items-center px-6 flex-shrink-0 pt-6 pb-4",contentWrapperCssClasses:"flex-grow p-6 pt-0",headerControl:(0,W.jsx)(U,{selectedCount:fe.length,loadedCount:(null==nt?void 0:nt.length)||0,showFilters:0!==(null==nt?void 0:nt.length)||(Boolean(oe)||Boolean(ie)),totalCount:(null===(K=Je.data)||void 0===K?void 0:K.projectFiles.totalCount)||0,onSelectAll:bt,selectionIsIndeterminate:Et,isSelectionMode:me,toggleProjectView:mt,projectView:vt,project:Ot,fromSharedWithMe:"shared-with-me"===he,selectionType:De,onSelectEverything:St,clearSelection:ot,showSelectionBanner:Ge,onDownloadAllClick:at}),children:(0,W.jsx)("div",{className:"space-y-3",children:Ot&&(0,W.jsxs)(W.Fragment,{children:[nt&&nt.length>0?(0,W.jsx)("div",{className:"space-y-4",children:"list"===vt?(0,W.jsx)(J,{id:"project-list",files:nt,selectionMode:me,onSelectionChange:rt,selectedAnimations:fe,selectable:!0,canLoadMore:be,onLoadMore:wt,isLoadingMore:le,onFolderDownloadAllClick:ct,onItemClick:Ct,workspaceId:Ot.workspaceId}):(0,W.jsx)(q,{files:nt,selectionMode:me,onSelectionChange:rt,selectedAnimations:fe,selectable:!0,onLoadMore:wt,canLoadMore:be,isLoadingMore:le,showAddToCollection:!0,onFolderDownloadAllClick:ct,onItemClick:Ct,workspaceId:Ot.workspaceId})}):(0,W.jsxs)(W.Fragment,{children:[!oe&&"folders"===ie&&(0,W.jsx)(j.H,{title:"Create folders for your animations",description:"Sort your animations into folders to stay organized.",view:"empty-project-folders",canCreateFolder:!0}),!oe&&"folders"!==ie&&!Ot.isSystem&&(null===(z=Ot.projectPermissionScopes)||void 0===z?void 0:z.includes("full_access"))&&(0,W.jsx)("div",{className:"pt-2",children:(0,W.jsx)(h.default,{projectId:Ot.id})}),!oe&&"folders"!==ie&&!Ot.isSystem&&!(null!==(Q=Ot.projectPermissionScopes)&&void 0!==Q&&Q.includes("full_access"))&&(0,W.jsx)(j.H,{title:"Animation added will appear here",description:"You can only view this project. Ask for full access to add animations.",view:"empty-project"}),!oe&&"folders"!==ie&&Ot.isSystem&&"Drafts"===Ot.title&&(0,W.jsx)(j.H,{title:"Your draft Creator files will appear here",description:"Creator files created in this workspace will be automatically saved here as drafts once they’ve been edited.",view:"empty-project",canCreateAnimations:!0}),oe&&(0,W.jsx)(j.H,{title:"No result found",description:"We couldn't find any item based on your filter.",view:"no-results"})]}),me?(0,W.jsx)(H,{type:"project",resourceId:Ot.id,workspaceId:Ot.workspace.id,selectedAnimations:fe,isPrivate:Ot.isPrivate,clear:ot,onDownload:it,onTransferComplete:yt,totalCount:(null===(X=Je.data)||void 0===X?void 0:X.projectFiles.totalCount)||0,contentStats:Ze,isEverythingSelected:De===V.RT.EVERYTHING}):null]})})}),Oe&&(0,W.jsx)(G,{show:Oe,numberOfEntries:lt,onClose:st,onSelect:dt,workspaceId:null==Ot?void 0:Ot.workspaceId})]})]})}},40729:function(e,t,n){"use strict";n.d(t,{s:function(){return s},w:function(){return c}});var r=n(62295),o=n(29901),i=n(61250),a=o.createContext({features:[]}),s=function(e){var t=e.children,n=e.features;return(0,i.jsx)(a.Provider,{value:{features:n},children:t})},c=function(){var e=o.useContext(a).features;return e?new r.UZ(e):new r.UZ([])}},30525:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var r=(0,n(24161).atom)({key:"selectedAnimationsCount",default:0})},90768:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(24161),o=(0,r.atom)({key:"transferSelectionAtom",default:null});(0,r.atom)({key:"createNewFolder",default:!1})},81662:function(e,t,n){"use strict";n.d(t,{h:function(){return r.h}});var r=n(90768)},95610:function(e,t,n){"use strict";n.d(t,{E4:function(){return r.E4},rU:function(){return r.rU},qx:function(){return r.qx},NY:function(){return r.NY}});var r=n(97527);n(19664)},79321:function(e,t,n){"use strict";var r,o,i,a,s,c,l;n.d(t,{GN:function(){return r},Nn:function(){return o},hF:function(){return i},eL:function(){return a},nT:function(){return c},ws:function(){return l},QR:function(){return d},xK:function(){return p},qR:function(){return f}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(r||(r={})),function(e){e.Loop="Loop",e.PlayOnce="PlayOnce"}(o||(o={})),function(e){e.DotLottie="lottie",e.Gif="gif",e.LottieJson="json",e.Mp4="mp4"}(i||(i={})),function(e){e.GIF="gif",e.MOV="mov",e.MP4="mp4",e.WEBM="webm"}(a||(a={})),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(s||(s={})),function(e){e.Approved="Approved",e.InProgress="InProgress",e.NeedsReview="NeedsReview",e.Shipped="Shipped"}(c||(c={})),function(e){e.Completed="Completed",e.Failed="Failed",e.InProgress="InProgress",e.Pending="Pending"}(l||(l={}));var u=function(e){return e.split(".").pop()};function d(e){if(!e.fileObject)return!1;var t=e.fileObject.filename,n=u(t);return void 0!==n&&["lottie","json"].includes(n)}function p(e){if(!e.fileObject)return!1;var t=e.fileObject.filename,n=u(t);return void 0!==n&&"creator"===n}function f(e){return e&&"Folder"===e.__typename}},36199:function(e,t,n){"use strict";var r;function o(e,t,n){var r=Math.min(e,t),o=Math.max(e+1,t+1);return n.splice(r,o-r)}function i(e,t){t.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));n>-1&&e.splice(n,1)}))}function a(e,t){t.forEach((function(t){-1===e.findIndex((function(e){return e.id===t.id}))&&e.push(t)}))}n.d(t,{RT:function(){return r},Jm:function(){return o},wh:function(){return i},AW:function(){return a}}),function(e){e.EVERYTHING="everything",e.LOADED="loaded"}(r||(r={}))},83428:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[id]",function(){return n(89654)}])},17172:function(e,t,n){e.exports=n(17158)},83907:function(e,t,n){e=n.nmd(e),function(n,r){"use strict";var o={};n.PubSub?(o=n.PubSub,console.warn("PubSub already loaded, using existing version")):(n.PubSub=o,function(e){var t={},n=-1,r="*";function o(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function i(e){return function(){throw e}}function a(e,t,n){try{e(t,n)}catch(e){setTimeout(i(e),0)}}function s(e,t,n){e(t,n)}function c(e,n,r,o){var i,c=t[n],l=o?s:a;if(Object.prototype.hasOwnProperty.call(t,n))for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&l(c[i],e,r)}function l(e,t,n){return function(){var o=String(e),i=o.lastIndexOf(".");for(c(e,e,t,n);-1!==i;)i=(o=o.substr(0,i)).lastIndexOf("."),c(e,o,t,n);c(e,r,t,n)}}function u(e){var n=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,n)&&o(t[n]))}function d(e){for(var t=String(e),n=u(t)||u(r),o=t.lastIndexOf(".");!n&&-1!==o;)o=(t=t.substr(0,o)).lastIndexOf("."),n=u(t);return n}function p(e,t,n,r){var o=l(e="symbol"==typeof e?e.toString():e,t,r);return!!d(e)&&(!0===n?o():setTimeout(o,0),!0)}e.publish=function(t,n){return p(t,n,!1,e.immediateExceptions)},e.publishSync=function(t,n){return p(t,n,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var o="uid_"+String(++n);return t[e][o]=r,o},e.subscribeAll=function(t){return e.subscribe(r,t)},e.subscribeOnce=function(t,n){var r=e.subscribe(t,(function(){e.unsubscribe(r),n.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&delete t[n]},e.countSubscriptions=function(e){var n,r,o=0;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)){for(r in t[n])o++;break}return o},e.getSubscriptions=function(e){var n,r=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e)&&r.push(n);return r},e.unsubscribe=function(n){var r,o,i,a=function(e){var n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&0===n.indexOf(e))return!0;return!1},s="string"==typeof n&&(Object.prototype.hasOwnProperty.call(t,n)||a(n)),c=!s&&"string"==typeof n,l="function"==typeof n,u=!1;if(!s){for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(o=t[r],c&&o[n]){delete o[n],u=n;break}if(l)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===n&&(delete o[i],u=!0)}return u}e.clearSubscriptions(n)}}(o)),void 0!==e&&e.exports&&(t=e.exports=o),t.PubSub=o,e.exports=t=o}("object"==typeof window&&window||this)}},function(e){e.O(0,[6627,726,5313,785,532,8361,3069,9774,2888,179],(function(){return t=83428,e(e.s=t);var t}));var t=e.O();_N_E=t}]);