(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2242,9008],{77179:function(e,n,t){var r=t(18361);e.exports=function(e){return r(e,5)}},97452:function(e,n,t){"use strict";t.d(n,{o:function(){return s}});t(29901);var r=t(24161),o=t(95610),i=t(26729),a=t(61250),s=function(e){var n=e.children,t=e.contentWrapperCssClasses,s=void 0===t?"flex-grow overflow-hidden":t,l=e.headerControl,u=e.headerWrapperCssClasses,c=void 0===u?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":u,d=(0,r.useRecoilValue)(o.qx);return(0,a.jsxs)("div",{"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[l&&(0,a.jsx)("div",{className:c,children:l}),d?(0,a.jsx)(i.a,{size:"lg"}):(0,a.jsx)("div",{className:s,children:n})]})}},36400:function(e,n,t){"use strict";t.d(n,{s:function(){return l}});var r=t(89303),o=(t(29901),t(24161)),i=t(88927),a=t(65513),s=t(61250),l=function(){var e=(0,o.useRecoilState)(i.Hw),n=(0,r.Z)(e,2),t=n[0],l=n[1];return(0,s.jsx)(a.n,{icon:"bounding-box",title:"Bounding box",onClick:function(){l(!t)},iconColorClass:t?"text-teal-300":"text-gray-600"})}},24313:function(e,n,t){"use strict";t.r(n);var r=t(89303),o=t(55312),i=t(24642),a=t.n(i),s=t(59715),l=t(71108),u=t(26766),c=t(62295),d=t(83849),f=t.n(d),p=t(79120),m=t(77179),v=t.n(m),b=t(4611),h=t(73378),x=t(17172),w=t(29901),g=t(34742),y=t(24161),C=t(389),k=t(88431),E=t(96065),j=t(97452),O=t(36400),S=t(50295),I=t(95618),M=t(27467),N=t(65513),F=t(25067),P=t(65815),T=t(67503),R=t(20343),L=t(48321),_=t(53707),q=t(59018),A=t(30022),U=t(55791),Z=t(40355),G=t(11706),D=t(40729),B=t(51638),V=t(28875),K=t(48412),z=t(30945),H=t(88927),W=t(58756),Q=t(95610),Y=t(92971),J=t(46641),X=t(61566),$=t(18705),ee=t(61250),ne=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(5471),t.e(9837),t.e(5575)]).then(t.bind(t,25575)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[25575]},modules:["animation/[id].tsx -> @/components/features/onboarding/onboarding-modal"]}}),te=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(8788).then(t.bind(t,8788)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[8788]},modules:["animation/[id].tsx -> @/components/features/upload/editor-handback-container"]}}),re=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(5471),t.e(9837),t.e(4868),t.e(6220),t.e(766)]).then(t.bind(t,10573)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10573]},modules:["animation/[id].tsx -> @/components/features/palette-swapper/color-palette-confirmation-modal"]}}),oe=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(9442).then(t.bind(t,39442)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[39442]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-export-panel"]}}),ie=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4550),t.e(106)]).then(t.bind(t,10106)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10106]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-qr-code"]}}),ae=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(467),t.e(7058)]).then(t.bind(t,47058)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[47058]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-embed"]}}),se=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(7283).then(t.bind(t,97283)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[97283]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-versions"]}}),le=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(4588),t.e(5313),t.e(8024),t.e(70),t.e(9288),t.e(1281),t.e(1581),t.e(7064)]).then(t.bind(t,87064)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[87064]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-segment-container"]}}),ue=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(4588),t.e(5313),t.e(8024),t.e(70),t.e(1281),t.e(1581),t.e(8448)]).then(t.bind(t,47831)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[47831]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-panel"]}}),ce=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7713),t.e(4868),t.e(249),t.e(6617)]).then(t.bind(t,86617)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[86617]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-color-palettes"]}}),de=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(243),t.e(8778),t.e(5471),t.e(9837),t.e(5313),t.e(4868),t.e(4270),t.e(5627),t.e(9455),t.e(6313),t.e(9199),t.e(860)]).then(t.bind(t,60860)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[60860]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-file-info"]}}),fe=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then(t.bind(t,50969)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[50969]},modules:["animation/[id].tsx -> @/components/page/animation/comment/comment-pushover"]}}),pe=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(9321).then(t.bind(t,19321)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[19321]},modules:["animation/[id].tsx -> @/components/page/animation/background-color-control"]}}),me=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(4588),t.e(5313),t.e(70),t.e(1281)]).then(t.bind(t,11281)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[11281]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-preview"]}}),ve=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(5313),t.e(261),t.e(3444)]).then(t.bind(t,80261)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[80261]},modules:["animation/[id].tsx -> @/components/page/animation/player/animation-player"]}}),be=(0,h.default)((0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(5471),t.e(9837),t.e(467),t.e(5313),t.e(5290),t.e(6692),t.e(4550),t.e(6220),t.e(6660),t.e(2113),t.e(6101),t.e(5632),t.e(9206),t.e(550)]).then(t.bind(t,68158)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[68158]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-header"]}}),he=function(){var e,n,t,o,i,a,d,m,h,E,he,xe,we,ge,ye,Ce,ke=(0,w.useState)(),Ee=ke[0],je=ke[1],Oe=(0,y.useRecoilState)(H.sI),Se=(0,r.Z)(Oe,2),Ie=Se[0],Me=Se[1],Ne=(0,w.useState)(),Fe=Ne[0],Pe=Ne[1],Te=(0,w.useState)(),Re=Te[0],Le=Te[1],_e=(0,y.useSetRecoilState)(Q.E4),qe=(0,y.useSetRecoilState)(H.GG),Ae=(0,w.useState)(null),Ue=Ae[0],Ze=Ae[1],Ge=(0,w.useState)(null),De=Ge[0],Be=Ge[1],Ve=(0,w.useState)(!1),Ke=Ve[0],ze=Ve[1],He=(0,y.useResetRecoilState)(H.h3),We=(0,y.useResetRecoilState)(H.m9),Qe=(0,y.useResetRecoilState)(H.lS),Ye=(0,y.useSetRecoilState)(Y.QJ),Je=(0,w.useState)(!1),Xe=Je[0],$e=Je[1],en=(0,w.useRef)(!1),nn=(0,w.useRef)(!1),tn=(0,y.useSetRecoilState)(Q.qx),rn=(0,w.useState)(),on=rn[0],an=rn[1],sn=(0,w.useRef)(!1),ln=(0,F.p)(),un=(0,b.useRouter)(),cn=un.query,dn=cn.frame,fn=cn.sort,pn=(0,G.k)(),mn=pn.canShowOnboarding,vn=pn.start,bn=un.query,hn=bn.handback_id,xn=bn.id,wn=(0,L.a)(),gn=(0,B.cF)(),yn=gn.activeWorkspaceId,Cn=gn.setActiveWorkspace,kn=gn.workspaces,En=(0,s.SS)(c.AD.ENABLE_ANIMATION_NAVIGATION_SHORTCUTS),jn=(0,C.aM)({query:V.wP,variables:{id:xn},pause:!xn}),On=(0,r.Z)(jn,1)[0],Sn=(0,C.aM)({query:V.xQ,variables:{id:xn,sort:fn,folderId:null===(e=On.data)||void 0===e||null===(n=e.file.folder)||void 0===n?void 0:n.id},pause:!xn||!On.data||!En.on}),In=(0,r.Z)(Sn,1)[0],Mn=(0,A.w)(),Nn=(0,r.Z)(Mn,2),Fn=Nn[0],Pn=Nn[1],Tn=(0,Z._)("animation_sidebar_panel_state",{}),Rn=(0,r.Z)(Tn,1)[0];(0,U.Z)({key:"k",action:function(){var e;if(!En.off)if(null!==(e=In.data)&&void 0!==e&&e.fileAboveAndBelowId.nextAnimation){var n="/animation/".concat(In.data.fileAboveAndBelowId.nextAnimation);fn&&(n+="?sort=".concat(encodeURIComponent(fn.toString()))),un.push(n),nn.current=!1}else if(!en.current){var t=(0,ee.jsx)("div",{children:"No more animations to go to"});null==ln||ln.pushCustom(t,1e3,"bg-gray-900","text-white"),en.current=!0}},dependencies:[In,En.off],takesPrecedence:!0}),(0,U.Z)({key:"j",action:function(){var e;if(!En.off)if(null!==(e=In.data)&&void 0!==e&&e.fileAboveAndBelowId.prevAnimation){var n="/animation/".concat(In.data.fileAboveAndBelowId.prevAnimation);fn&&(n+="?sort=".concat(encodeURIComponent(fn.toString()))),un.push(n),en.current=!1}else if(!nn.current){var t=(0,ee.jsx)("div",{children:"No more animations to go to"});null==ln||ln.pushCustom(t,1e3,"bg-gray-900","text-white"),nn.current=!0}},dependencies:[In,En.off],takesPrecedence:!0}),(0,w.useEffect)((function(){if(In.data&&In.data.fileAboveAndBelowId.nextAnimation&&!sn.current&&En.on){var e,n="next-prev-toast-".concat(null===(e=wn.user)||void 0===e?void 0:e.id),t=localStorage.getItem(n),r=(new Date).getTime();if(!t||r-parseInt(t,10)>12096e5){localStorage.setItem(n,r.toString());var o=(0,ee.jsxs)("div",{children:["Use the ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==ln||ln.pushCustom(o,3e3,"bg-gray-900","text-white")}sn.current=!0}}),[ln,En.on,null===(t=wn.user)||void 0===t?void 0:t.id,In.data]),(0,w.useEffect)((function(){if(On.data){var e,n,t,r=null===(e=On.data.file.folder)||void 0===e?void 0:e.id,o=null===(n=On.data.file.folder)||void 0===n?void 0:n.name,i=On.data.file.project.id,a=On.data.file.project.title,s=null!==(t=On.data.file.project.isPrivate)&&void 0!==t&&t,l=On.data.file.project.workspaceId,u=kn.some((function(e){var n;return e.id===(null===(n=On.data)||void 0===n?void 0:n.file.project.workspaceId)}));l&&u&&l!==yn&&Cn(l,!1),Ye({type:r?"folder":"project",name:r?o:a,folderId:r,folderName:o,projectId:i,projectTitle:a,isPrivate:s,workspaceId:l})}}),[On.data,Ye,yn,Cn,kn]);var Ln=(0,w.useState)("#f8fafc"),_n=Ln[0],qn=Ln[1],An=(0,y.useRecoilState)(H.h3),Un=(0,r.Z)(An,1)[0],Zn=(0,w.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null}),Gn=Zn[0],Dn=Zn[1];(0,w.useEffect)((function(){var e;if((He(),We(),On.fetching&&tn(!0),!On.fetching)&&(tn(!1),Fn===J.s.NONE))if(Rn&&null!==(e=wn.user)&&void 0!==e&&e.id&&Rn[wn.user.id]){var n=Rn[wn.user.id];n===J.s.LOTTIE_MOCKUP&&Pn(J.s.SEGMENT_MOCKUP),Pn(n)}else Pn(J.s.DOWNLOAD);return function(){}}),[He,We,Pn,On]);var Bn=(0,w.useCallback)((function(e){try{void 0!==(0,p.H3)(e)&&qn(e)}catch(e){qn("#f8fafc")}}),[]);(0,w.useEffect)((function(){var e;if(null!=Un&&Un.fileObject){je(Un.fileObject.url),Pe(Un.fileObject.metadata),Le(Un.fileObject.attributes),Be(Un.fileObject),an(Un.tags),Bn(Un.backgroundColor);var n=Un.fileObject.url,t=n.substring(n.lastIndexOf("/")+1,n.indexOf("?")).split(".").pop();qe("lottie"===t)}else if(On.data&&!On.fetching){var r;je(On.data.file.fileObject.url),Me(On.data.file),_e({type:"project",id:On.data.file.project.id}),Pe(On.data.file.fileObject.metadata),Le(On.data.file.fileObject.attributes),Be(On.data.file.fileObject),an(On.data.file.currentVersion.tags),Dn({id:On.data.file.id,showDescOnCollection:On.data.file.showDescOnCollection,description:On.data.file.description,descriptionUpdatedAt:null===(r=On.data.file)||void 0===r?void 0:r.descriptionUpdatedAt,descriptionModifiedBy:On.data.file.descriptionModifiedBy}),Bn(On.data.file.backgroundColor);var o=On.data.file.fileObject.url,i=o.substring(o.lastIndexOf("/")+1,o.indexOf("?")).split(".").pop();qe("lottie"===i)}else if(On.error)throw On.error.toString().includes("Access denied")?new k.J:new Error(On.error.message);if(null!==(e=On.data)&&void 0!==e&&e.file.upgradeRequired)throw new T.K}),[On,Un,qe,Me,_e,Bn]),(0,w.useEffect)((function(){var e;null!==(e=On.data)&&void 0!==e&&e.file.id&&(0,u.Z9)(new u.Aj({fileId:On.data.file.id,projectId:On.data.file.project.id,workspaceId:On.data.file.project.workspaceId}))}),[null===(o=On.data)||void 0===o?void 0:o.file.id,null===(i=On.data)||void 0===i?void 0:i.file.project.id,null===(a=On.data)||void 0===a?void 0:a.file.project.workspaceId]);var Vn=(0,w.useState)(!1),Kn=Vn[0],zn=Vn[1],Hn=(0,w.useState)(!1),Wn=Hn[0],Qn=Hn[1],Yn=(0,g.r)(),Jn=(0,R.a)({scopes:(null==Ie?void 0:Ie.animationPermissionScopes)||[]}),Xn=Jn.canDownload,$n=Jn.canFullAccess,et=Jn.canView,nt=(0,y.useRecoilState)(W.vQ),tt=(0,r.Z)(nt,2)[1],rt=(0,w.useCallback)((function(){un.query.comment&&(delete un.query.comment,un.push({pathname:un.pathname,query:un.query},void 0,{shallow:!0}))}),[un]),ot=(0,w.useCallback)((function(){Pn(J.s.NONE),$e(!1),Fn===J.s.COMMENTS&&rt(),un.query.panel&&(delete un.query.panel,un.push({pathname:un.pathname,query:un.query},void 0,{shallow:!0}))}),[un,Fn,Pn,$e,rt]),it=(0,w.useCallback)((function(e){return function(){Fn===e?(e===J.s.FILE_INFO&&tt(!1),ot()):(e!==J.s.FILE_INFO&&tt(!1),Pn(e),un.query.panel!==e&&(un.query.panel=e,un.push({pathname:un.pathname,query:un.query},void 0,{shallow:!0}))),Fn===J.s.COMMENTS&&rt()}}),[un,ot,Fn,Pn,tt,rt]);(0,U.Z)({key:"c",action:function(){Fn!==J.s.COMMENTS?it(J.s.COMMENTS):Fn===J.s.COMMENTS&&ot()},dependencies:[it,ot,Fn]});var at=(0,C.aM)({query:K.g,variables:{id:hn},pause:!hn}),st=(0,r.Z)(at,1)[0];(0,w.useEffect)((function(){Fn!==J.s.COMMENTS&&un.query.comment&&(it(J.s.COMMENTS)(),un.push({pathname:un.pathname,query:un.query},void 0,{shallow:!0})),un.query.edit_description&&(Fn!==J.s.FILE_INFO&&it(J.s.FILE_INFO)(),$e(!0),delete un.query.edit_description,un.replace({pathname:un.pathname,query:un.query},void 0,{shallow:!0}))}),[Fn,un,it,Xe]);var lt=(0,w.useCallback)((function(){Kn?(zn(!1),Yn.exit()):(zn(!0),ot(),Yn.enter())}),[ot,Yn,Kn]),ut=(0,w.useCallback)((function(e,n){n===Yn&&zn(!!e)}),[Yn]);(0,w.useEffect)((function(){vn([P._r,P.T8,P.qO,P.fA,P.rG,P.Mx,P.QT])}),[Ie]);var ct=(0,w.useCallback)((function(){Qn(!Wn)}),[Wn,Qn]),dt=(0,w.useRef)(null),ft=(0,w.useMemo)((function(){return(null==Un?void 0:Un.id)||(null==Ie?void 0:Ie.currentVersionId)||""}),[null==Un?void 0:Un.id,null==Ie?void 0:Ie.currentVersionId]),pt=(0,w.useMemo)((function(){var e,n;return{entityId:ft,entityGroupId:(null==Ie?void 0:Ie.id)||xn,isEnabled:null==Un||!Un.id||Un.id===(null==Ie?void 0:Ie.currentVersionId),workspaceId:(null==Ie||null===(e=Ie.project)||void 0===e||null===(n=e.workspace)||void 0===n?void 0:n.id)||""}}),[ft,null==Un?void 0:Un.id,null==Ie?void 0:Ie.currentVersionId,null==Ie?void 0:Ie.id,null==Ie||null===(d=Ie.project)||void 0===d||null===(m=d.workspace)||void 0===m?void 0:m.id,xn]),mt=(0,_.X0)(pt),vt=(0,_.us)(pt),bt=(0,_.es)(pt),ht=(0,_.VP)(pt),xt=(0,_.UR)(pt),wt=(0,_.OL)(pt),gt=(0,_._i)(pt),yt=(0,q.M)({entityId:Fn===J.s.COMMENTS?ft:"",entityType:X.TY.FileVersion}),Ct=yt.canFetchMoreComments,kt=yt.commentsQuery,Et=yt.onFetchMoreComments,jt=yt.onHideReplies,Ot=yt.onShowReplies,St=yt.parentComment,It=yt.pushoverMode;(0,w.useEffect)((function(){dn&&jt(null)}),[dn,jt]);var Mt=(0,w.useMemo)((function(){return(0,p.H3)(_n||"#f8fafc")<.5}),[_n]),Nt=(0,C.aM)({query:z.mT,variables:{id:xn},pause:!xn||Fn!==J.s.COMMENTS}),Ft=(0,r.Z)(Nt,1)[0],Pt=(0,w.useState)(!1),Tt=Pt[0],Rt=Pt[1],Lt=(0,w.useCallback)((function(){return Rt(!0)}),[]),_t=(0,w.useCallback)((function(){return Rt(!1)}),[]);(0,w.useEffect)((function(){_t()}),[It,_t]);var qt=(0,w.useCallback)((function(e){return function(){Fn!==e&&((0,u.Z9)(new u.lF({location:e})),it(e)())}}),[Fn,it]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(x.default,{children:(0,ee.jsx)("title",{children:(null==Ie?void 0:Ie.name)||"Animation"})}),(0,ee.jsxs)(j.o,{headerControl:(0,ee.jsx)(D.s,{features:null==Ie?void 0:Ie.features,children:(0,ee.jsx)(be,{animation:Ie,animationFetching:On.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Ie&&(0,ee.jsxs)(D.s,{features:Ie.features,children:[(0,ee.jsxs)(g.I,{className:f()({"flex flex-grow":!0}),handle:Yn,onChange:ut,children:[(0,ee.jsx)("div",{className:f()({"relative flex flex-grow ":!0,"transparency-grid":Wn}),children:(0,ee.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,ee.jsx)("div",{className:f()({"absolute inset-0 flex flex-grow ":!0,"transparency-grid":Wn}),style:{background:_n}}),Fn===J.s.LOTTIE_MOCKUP?(0,ee.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-auto pr-80",children:(0,ee.jsx)(me,{animation:Ie,canEdit:$n()})}):(0,ee.jsxs)("div",{className:f()("relative flex items-center justify-center w-full h-full overflow-auto",{"pr-80":Fn!==J.s.NONE}),children:[Ee&&!Ue&&(0,ee.jsx)(ve,{showComments:!0,canComment:!Un,mentionables:null===(h=Ft.data)||void 0===h?void 0:h.commentMentionableUsers,portalRoot:dt.current,animationUrl:Ee,currentDiscussion:St,currentUserId:null===(E=wn.user)||void 0===E?void 0:E.id,entityId:ft,entityType:X.TY.FileVersion,controls:!Kn,isLight:Mt,onDeleteComment:mt,onEditComment:vt,onPostComment:bt,onReplyToComment:ht,onResolveComment:xt,onSelectReaction:wt,onUnresolveComment:gt}),Ee&&Ue&&(0,ee.jsx)(ve,{portalRoot:dt.current,animationUrl:v()(Ue),controls:!Kn,isLight:Mt}),!Kn&&(0,ee.jsxs)("div",{className:f()("absolute top-0 bottom-0 flex flex-col pt-8 pr-8 pb-14 ",{"right-0":Fn===J.s.NONE,"right-86":Fn!==J.s.NONE}),children:[(0,ee.jsxs)("div",{className:"flex flex-col space-y-2","data-onboarding-id":"anim-panel-btn",children:[et()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,ee.jsx)(N.n,{icon:"comment",title:"Comments",shortcut:(0,ee.jsx)(M.z,{keys:["C"]}),onClick:qt(J.s.COMMENTS),iconColorClass:Fn===J.s.COMMENTS?"text-teal-300":"text-gray-600"})}),(0,ee.jsx)(N.n,{icon:"info",title:"Animation information",onClick:qt(J.s.FILE_INFO),iconColorClass:Fn===J.s.FILE_INFO?"text-teal-300":"text-gray-600"}),$n()&&!Un&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,ee.jsx)(N.n,{icon:"color-palette",title:"Color Palette",onClick:qt(J.s.COLOR_PALETTES),iconColorClass:Fn===J.s.COLOR_PALETTES?"text-teal-300":"text-gray-600"})}),!Un&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,ee.jsx)(N.n,{icon:"segment-mockup",title:"Segments & Mockups",onClick:qt(J.s.SEGMENT_MOCKUP),iconColorClass:Fn===J.s.SEGMENT_MOCKUP?"text-teal-300":"text-gray-600"})}),$n()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,ee.jsx)(N.n,{icon:"history",title:"Version History",onClick:qt(J.s.VERSIONS),iconColorClass:Fn===J.s.VERSIONS?"text-teal-300":"text-gray-600"})}),Xn()&&!Un&&(0,ee.jsx)(N.n,{icon:"embed",title:"Handoff & Embed",iconColorClass:Fn===J.s.EMBED?"text-teal-300":"text-gray-600",onClick:qt(J.s.EMBED)})]}),(0,ee.jsxs)("div",{className:"flex flex-col mt-auto space-y-2",children:[(0,ee.jsx)(O.s,{}),(0,ee.jsx)(N.n,{icon:"grid",title:"Transparency grid",onClick:ct,iconColorClass:Wn?"text-teal-300":"text-gray-600"}),(0,ee.jsx)(pe,{animationBackgroundColor:_n,onChange:function(e){qn(e)},fileId:Ie.id,portalRoot:dt.current}),(0,ee.jsx)(N.n,{icon:"full-screen",title:"Full screen",onClick:lt,iconColorClass:Kn?"text-teal-300":"text-gray-600"}),(0,ee.jsx)(S.L,{})]})]})]})]})}),(0,ee.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,ee.jsxs)(l.uT,{show:Fn!==J.s.NONE,className:"relative flex flex-col bg-white border-l border-gray-100 w-86",enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Fn!==J.s.LOTTIE_MOCKUP&&(0,ee.jsx)("div",{className:"absolute right-6 top-6",children:(0,ee.jsx)(I.h,{name:"cross",onClick:ot,small:!0,iconLighter:!0})}),Fn===J.s.COMMENTS&&(0,ee.jsx)(fe,{currentUserId:null===(he=wn.user)||void 0===he?void 0:he.id,discussions:null===(xe=kt.data)||void 0===xe||null===(we=xe.comments)||void 0===we?void 0:we.edges,isFetchingDiscussions:kt.fetching,isInputExpanded:Tt,mentionables:null===(ge=Ft.data)||void 0===ge?void 0:ge.commentMentionableUsers,mode:It,parentDiscussion:St,canFetchMoreComments:Ct,onCollapseInput:_t,onFetchMoreComments:Et,onExpandInput:Lt,onDelete:mt,onEdit:vt,onPost:bt,onReply:ht,onReplyClick:Ot,onResolve:xt,onSelectReaction:wt,onUnresolve:gt}),Fn===J.s.FILE_INFO&&Fe&&(0,ee.jsx)(de,{fileMetaData:Fe,basicMetadata:Re,fileData:Gn,canEdit:$n(),canDownload:Xn(),isEditing:Boolean($n()&&Xe),fileUrl:Ee,tags:on,fileId:Ie.id,fileKey:null==De?void 0:De.key,thumbnailUrl:null==De||null===(ye=De.thumbnails)||void 0===ye||null===(Ce=ye.png)||void 0===Ce?void 0:Ce.medium.url,animation:Ie,workspaceId:Ie.project.workspaceId}),Fn===J.s.COLOR_PALETTES&&(0,ee.jsx)(ce,{animationUrl:Ee,portalRoot:dt.current,workspaceId:Ie.project.workspaceId,setColorModifiedLottie:Ze,setOpenColorPaletteModal:ze}),Fn===J.s.LOTTIE_MOCKUP&&(0,ee.jsx)(ue,{canEdit:$n(),animation:Ie,onBackToLottieMockupList:qt(J.s.SEGMENT_MOCKUP)}),Fn===J.s.SEGMENT_MOCKUP&&(0,ee.jsx)(le,{animation:Ie,showLottieMockup:qt(J.s.LOTTIE_MOCKUP)}),Fn===J.s.VERSIONS&&(0,ee.jsx)(se,{selectVersionPreview:function(){Ze(null),Qe()},animation:Ie}),Fn===J.s.EMBED&&(0,ee.jsx)(ae,{fileId:Ie.id,currentVersionId:Ie.currentVersionId,workspaceId:Ie.project.workspaceId}),Fn===J.s.QRCODE&&(0,ee.jsx)(ie,{fileUrl:Ie.fileObject.url}),Fn===J.s.DOWNLOAD&&Re&&(0,ee.jsx)(oe,{animation:Ie,basicMetadata:Re,fileMetaData:Fe})]})}),(0,ee.jsx)("div",{ref:dt})]}),Ke&&Ue&&De&&(0,ee.jsx)(re,{currentFile:De,currentFileId:null==Ie?void 0:Ie.id,lottieAnimation:Ue,closeCallback:function(){ze(!1)},animationName:null==Ie?void 0:Ie.name,currentBackgroundColor:(null==Ie?void 0:Ie.backgroundColor)||"none",show:!0})]}),Ie&&hn&&!st.fetching&&st.data&&(0,ee.jsx)(te,{animation:Ie,handback:st.data.fileHandback})]}),(0,ee.jsx)(ne,{illustrationURL:"/images/onboarding-animation.png",show:mn($.yM.INTRO_ANIM_SEQUENCE),title:"A fresh new look for animation pages",description:"We’ve redesigned the animation pages from the ground up so you can easily get to the tools you’ll need and enjoy a better overall experience. Check out what we’ve changed!",buttonContent:"Let's go",onClose:function(){return vn([P.p9])}})]})};he.getLayout=function(e){return(0,ee.jsx)(E.B,{collapsed:!0,children:e})},n.default=he},40729:function(e,n,t){"use strict";t.d(n,{s:function(){return s},w:function(){return l}});var r=t(62295),o=t(29901),i=t(61250),a=o.createContext({features:[]}),s=function(e){var n=e.children,t=e.features;return(0,i.jsx)(a.Provider,{value:{features:t},children:n})},l=function(){var e=o.useContext(a).features;return e?new r.UZ(e):new r.UZ([])}},95610:function(e,n,t){"use strict";t.d(n,{E4:function(){return r.E4},rU:function(){return r.rU},qx:function(){return r.qx},NY:function(){return r.NY}});var r=t(97527);t(19664)},17172:function(e,n,t){e.exports=t(17158)},83907:function(e,n,t){e=t.nmd(e),function(t,r){"use strict";var o={};t.PubSub?(o=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=o,function(e){var n={},t=-1,r="*";function o(e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}function i(e){return function(){throw e}}function a(e,n,t){try{e(n,t)}catch(e){setTimeout(i(e),0)}}function s(e,n,t){e(n,t)}function l(e,t,r,o){var i,l=n[t],u=o?s:a;if(Object.prototype.hasOwnProperty.call(n,t))for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&u(l[i],e,r)}function u(e,n,t){return function(){var o=String(e),i=o.lastIndexOf(".");for(l(e,e,n,t);-1!==i;)i=(o=o.substr(0,i)).lastIndexOf("."),l(e,o,n,t);l(e,r,n,t)}}function c(e){var t=String(e);return Boolean(Object.prototype.hasOwnProperty.call(n,t)&&o(n[t]))}function d(e){for(var n=String(e),t=c(n)||c(r),o=n.lastIndexOf(".");!t&&-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),t=c(n);return t}function f(e,n,t,r){var o=u(e="symbol"==typeof e?e.toString():e,n,r);return!!d(e)&&(!0===t?o():setTimeout(o,0),!0)}e.publish=function(n,t){return f(n,t,!1,e.immediateExceptions)},e.publishSync=function(n,t){return f(n,t,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(n,e)||(n[e]={});var o="uid_"+String(++t);return n[e][o]=r,o},e.subscribeAll=function(n){return e.subscribe(r,n)},e.subscribeOnce=function(n,t){var r=e.subscribe(n,(function(){e.unsubscribe(r),t.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){n={}},e.clearSubscriptions=function(e){var t;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&delete n[t]},e.countSubscriptions=function(e){var t,r,o=0;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)){for(r in n[t])o++;break}return o},e.getSubscriptions=function(e){var t,r=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&r.push(t);return r},e.unsubscribe=function(t){var r,o,i,a=function(e){var t;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e))return!0;return!1},s="string"==typeof t&&(Object.prototype.hasOwnProperty.call(n,t)||a(t)),l=!s&&"string"==typeof t,u="function"==typeof t,c=!1;if(!s){for(r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(o=n[r],l&&o[t]){delete o[t],c=t;break}if(u)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===t&&(delete o[i],c=!0)}return c}e.clearSubscriptions(t)}}(o)),void 0!==e&&e.exports&&(n=e.exports=o),n.PubSub=o,e.exports=n=o}("object"==typeof window&&window||this)},34742:function(e,n,t){"use strict";t.d(n,{I:function(){return f},r:function(){return d}});var r=t(29901),o={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},i=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],a=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],s=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],l="undefined"!=typeof window&&void 0!==window.document?window.document:{},u="fullscreenEnabled"in l&&Object.keys(o)||i[0]in l&&i||a[0]in l&&a||s[0]in l&&s||[],c={requestFullscreen:function(e){return e[u[o.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[u[o.requestFullscreen]]},get exitFullscreen(){return l[u[o.exitFullscreen]].bind(l)},get fullscreenPseudoClass(){return":"+u[o.fullscreen]},addEventListener:function(e,n,t){return l.addEventListener(u[o[e]],n,t)},removeEventListener:function(e,n,t){return l.removeEventListener(u[o[e]],n,t)},get fullscreenEnabled(){return Boolean(l[u[o.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return l[u[o.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return l[("on"+u[o.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return l[("on"+u[o.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return l[("on"+u[o.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return l[("on"+u[o.fullscreenerror]).toLowerCase()]=e}};function d(){var e=(0,r.useState)(!1),n=e[0],t=e[1],o=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=function(){t(c.fullscreenElement===o.current)};return c.addEventListener("fullscreenchange",e),function(){return c.removeEventListener("fullscreenchange",e)}}),[]);var i=(0,r.useCallback)((function(){return c.fullscreenElement?c.exitFullscreen().then((function(){return c.requestFullscreen(o.current)})):o.current?c.requestFullscreen(o.current):void 0}),[]),a=(0,r.useCallback)((function(){return c.fullscreenElement===o.current?c.exitFullscreen():Promise.resolve()}),[]);return(0,r.useMemo)((function(){return{active:n,enter:i,exit:a,node:o}}),[n,i,a])}var f=function(e){var n=e.handle,t=e.onChange,o=e.children,i=e.className,a=[];return i&&a.push(i),a.push("fullscreen"),n.active&&a.push("fullscreen-enabled"),(0,r.useEffect)((function(){t&&t(n.active,n)}),[n.active]),r.createElement("div",{className:a.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0},o)}}}]);